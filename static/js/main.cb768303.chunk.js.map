{"version":3,"sources":["components/Searchbar/Searchbar.js","services/pixabay-api.js","components/ImageGalleryItem/ImageGalleryItem.js","components/Button/Button.js","components/Loader/Loader.js","components/Modal/Modal.js","components/ImageGallery/ImageGallery.js","App.js","index.js"],"names":["Searchbar","state","imageName","handleNameChange","event","setState","currentTarget","value","handleSubmit","e","preventDefault","trim","props","onSubmit","toLowerCase","toast","error","toastId","className","this","type","autoComplete","autoFocus","placeholder","onChange","Component","Config","api","fetchImage","searchQuery","page","axios","get","then","response","status","data","hits","Promise","reject","Error","ImageGalleryItem","onClick","src","alt","largeImgUrl","data-img-src","Button","Loader","color","height","width","Modal","handleKeyDown","code","onClose","handleBackdropClick","target","window","addEventListener","removeEventListener","Status","ImageGallery","images","isModalOpen","modalImg","modalAlt","handleRequest","nextPage","pixabayAPI","prevState","catch","handleLoadMoreBtn","toggleModal","pageSmoothScroll","scrollTo","top","document","documentElement","scrollHeight","behavior","showError","message","showInfo","info","prevProps","prevQuery","nextQuery","prevPage","length","map","tags","webformatURL","largeImageURL","shortid","generate","App","closeOnClick","autoClose","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.cb768303.chunk.js","sourcesContent":["import { Component } from 'react';\nimport { toast } from 'react-toastify';\nimport PropTypes from 'prop-types';\n\nclass Searchbar extends Component {\n  state = {\n    imageName: '',\n  };\n\n  handleNameChange = event => {\n    this.setState({\n      imageName: event.currentTarget.value,\n    });\n  };\n\n  handleSubmit = e => {\n    e.preventDefault();\n    const { imageName } = this.state;\n\n    if (imageName.trim() === '') {\n      toast.error('Пустое поле поиска.', { toastId: 'searchbar' });\n      return;\n    }\n\n    this.props.onSubmit(imageName.toLowerCase());\n    this.setState({ imageName: '' });\n  };\n\n  render() {\n    return (\n      <header className=\"Searchbar\" onSubmit={this.handleSubmit}>\n        <form className=\"SearchForm\">\n          <input\n            className=\"SearchForm-input\"\n            type=\"text\"\n            autoComplete=\"off\"\n            autoFocus\n            placeholder=\"Search images and photos\"\n            value={this.state.imageName}\n            onChange={this.handleNameChange}\n          />\n\n          <button type=\"submit\" className=\"SearchForm-button\">\n            <span className=\"SearchForm-button-label\">Search</span>\n          </button>\n        </form>\n      </header>\n    );\n  }\n}\n\nexport default Searchbar;\n\nSearchbar.propTypes = {\n  onSubmit: PropTypes.func,\n};\n","import axios from 'axios';\n\nconst Config = {\n  KEY: '19294514-cad9d9492229c8304ad27e22b',\n  PER_PAGE: 4,\n};\n\nfunction fetchImage(searchQuery, page = 1) {\n  return axios\n    .get(\n      `https://pixabay.com/api/?q=${searchQuery}&page=${page}&key=${Config.KEY}&image_type=photo&orientation=horizontal&per_page=${Config.PER_PAGE}`,\n    )\n    .then(response => {\n      if (response.status === 200) {\n        return response.data.hits;\n      }\n\n      return Promise.reject(new Error(`Images are not found.`));\n    });\n}\n\nconst api = {\n  fetchImage,\n};\n\nexport default api;\n","function ImageGalleryItem({ onClick, src, alt, largeImgUrl }) {\n  const handleImage = e => {\n    onClick(largeImgUrl, alt);\n  };\n\n  return (\n    <li className=\"ImageGalleryItem\">\n      <img\n        className=\"ImageGalleryItem-image\"\n        src={src}\n        alt={alt}\n        data-img-src={largeImgUrl}\n        onClick={handleImage}\n      />\n    </li>\n  );\n}\n\nexport default ImageGalleryItem;\n","function Button({ onClick }) {\n  return (\n    <button type=\"button\" className=\"Button\" onClick={onClick}>\n      Load more\n    </button>\n  );\n}\n\nexport default Button;\n","import 'react-loader-spinner/dist/loader/css/react-spinner-loader.css';\nimport ReactLoader from 'react-loader-spinner';\n\nfunction Loader() {\n  return <ReactLoader type=\"Puff\" color=\"#00BFFF\" height={100} width={100} />;\n}\n\nexport default Loader;\n","import { Component } from 'react';\n\nclass Modal extends Component {\n  componentDidMount() {\n    window.addEventListener('keydown', this.handleKeyDown);\n  }\n\n  componentWillUnmount() {\n    window.removeEventListener('keydown', this.handleKeyDown);\n  }\n\n  handleKeyDown = e => {\n    if (e.code === 'Escape') {\n      this.props.onClose();\n    }\n  };\n\n  handleBackdropClick = event => {\n    if (event.currentTarget === event.target) {\n      this.props.onClose();\n    }\n  };\n\n  render() {\n    const { src, alt } = this.props;\n\n    return (\n      <div className=\"Overlay\" onClick={this.handleBackdropClick}>\n        <div className=\"Modal\">\n          <img src={src} alt={alt} />\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default Modal;\n","import { Component } from 'react';\nimport shortid from 'shortid';\nimport { toast } from 'react-toastify';\nimport 'react-toastify/dist/ReactToastify.css';\nimport pixabayAPI from '../../services/pixabay-api';\nimport ImageGalleryItem from '../ImageGalleryItem';\nimport LoadMoreButton from '../Button';\nimport Loader from '../Loader';\nimport Modal from '../Modal';\n\nconst Status = {\n  IDLE: 'idle',\n  PENDING: 'pending',\n  RESOLVED: 'resolved',\n  REJECTED: 'rejected',\n};\n\nclass ImageGallery extends Component {\n  state = {\n    images: [],\n    error: null,\n    status: Status.IDLE,\n    page: 1,\n    isModalOpen: false,\n    modalImg: '',\n    modalAlt: '',\n  };\n\n  componentDidUpdate(prevProps, prevState) {\n    const prevQuery = prevProps.searchQuery;\n    const nextQuery = this.props.searchQuery;\n    const prevPage = prevState.page;\n    const nextPage = this.state.page;\n\n    if (this.state.status === Status.RESOLVED) {\n      this.pageSmoothScroll();\n    }\n\n    if (prevQuery !== nextQuery) {\n      this.setState({ status: Status.PENDING, page: 1 });\n      this.handleRequest(nextQuery);\n      return;\n    }\n\n    if (prevPage !== nextPage) {\n      this.setState({ status: Status.PENDING });\n      this.handleRequest(nextQuery, nextPage);\n      return;\n    }\n  }\n\n  handleRequest = (searchQuery, nextPage) => {\n    pixabayAPI\n      .fetchImage(searchQuery, nextPage)\n      .then(images =>\n        this.setState(prevState => {\n          if (nextPage > 1) {\n            images = [...prevState.images, ...images];\n          }\n\n          return {\n            images,\n            status: Status.RESOLVED,\n          };\n        }),\n      )\n      .catch(error => this.setState({ error, status: Status.REJECTED }));\n  };\n\n  handleLoadMoreBtn = () => {\n    this.setState(prevState => {\n      return {\n        page: prevState.page + 1,\n      };\n    });\n  };\n\n  toggleModal = (modalImg = '', modalAlt = '') => {\n    this.setState(prevState => ({\n      isModalOpen: !prevState.isModalOpen,\n      modalImg,\n      modalAlt,\n    }));\n  };\n\n  pageSmoothScroll = () => {\n    window.scrollTo({\n      top: document.documentElement.scrollHeight,\n      behavior: 'smooth',\n    });\n  };\n\n  showError = error => {\n    toast.error(error.message, { toastId: 'error' });\n  };\n\n  showInfo = () => {\n    toast.info('Images are not found.', { toastId: 'resolved' });\n  };\n\n  render() {\n    const {\n      images,\n      error,\n      status,\n      isModalOpen,\n      modalImg,\n      modalAlt,\n    } = this.state;\n\n    if (status === Status.PENDING) {\n      return <Loader />;\n    }\n\n    if (status === Status.REJECTED) {\n      this.showError(error);\n    }\n\n    if (status === Status.RESOLVED) {\n      if (!images.length) {\n        this.showInfo();\n        return null;\n      }\n\n      return (\n        <>\n          <ul className=\"ImageGallery\">\n            {images.map(({ tags, webformatURL, largeImageURL }) => (\n              <ImageGalleryItem\n                key={shortid.generate()}\n                src={webformatURL}\n                alt={tags}\n                largeImgUrl={largeImageURL}\n                onClick={this.toggleModal}\n              />\n            ))}\n          </ul>\n\n          {isModalOpen && (\n            <Modal onClose={this.toggleModal} src={modalImg} alt={modalAlt} />\n          )}\n\n          <LoadMoreButton onClick={this.handleLoadMoreBtn} />\n        </>\n      );\n    }\n\n    return null;\n  }\n}\n\nexport default ImageGallery;\n","import './App.css';\nimport { Component } from 'react';\nimport { ToastContainer } from 'react-toastify';\nimport Searchbar from './components/Searchbar';\nimport ImageGallery from './components/ImageGallery';\n\nclass App extends Component {\n  state = {\n    searchQuery: '',\n  };\n\n  onSubmit = searchQuery => {\n    this.setState({ searchQuery });\n  };\n\n  render() {\n    return (\n      <div className=\"App\">\n        <ToastContainer closeOnClick autoClose={2000} />\n        <Searchbar onSubmit={this.onSubmit} />\n        <ImageGallery searchQuery={this.state.searchQuery} />\n      </div>\n    );\n  }\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\nimport 'modern-normalize/modern-normalize.css';\nimport 'react-toastify/dist/ReactToastify.css';\nimport './index.css';\nimport './styles.css';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root'),\n);\n"],"sourceRoot":""}